plugins {
    id("maven-publish")
}

Project plugin = gradle.includedBuild("plugin").gradle.rootProject

plugin.tasks.stream().filter({task -> task.name.startsWith("publish")}).each {task ->
    tasks.findByName(task.name).with {
        if (it) {
            it.enabled = false
        } else {
            it = tasks.create(task.name)
        }

        it.dependsOn(task)
    }
}
